"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t="undefined"!=typeof self?self:{};function e(e,n){t:{for(var r=["CLOSURE_FLAGS"],i=t,o=0;o<r.length;o++)if(null==(i=i[r[o]])){r=null;break t}r=i}return null!=(e=r&&r[e])?e:n}function n(){throw Error("Invalid UTF8")}function r(t,e){return e=String.fromCharCode.apply(null,e),null==t?e:t+e}let i,o;const s="undefined"!=typeof TextDecoder;let a;const u="undefined"!=typeof TextEncoder;function c(t){if(u)t=(a||=new TextEncoder).encode(t);else{let n=0;const r=new Uint8Array(3*t.length);for(let i=0;i<t.length;i++){var e=t.charCodeAt(i);if(e<128)r[n++]=e;else{if(e<2048)r[n++]=e>>6|192;else{if(e>=55296&&e<=57343){if(e<=56319&&i<t.length){const o=t.charCodeAt(++i);if(o>=56320&&o<=57343){e=1024*(e-55296)+o-56320+65536,r[n++]=e>>18|240,r[n++]=e>>12&63|128,r[n++]=e>>6&63|128,r[n++]=63&e|128;continue}i--}e=65533}r[n++]=e>>12|224,r[n++]=e>>6&63|128}r[n++]=63&e|128}}t=n===r.length?r:r.subarray(0,n)}return t}var l,h=e(610401301,!1),f=e(653718497,e(1,!0)),d=e(660014094,!1);const g=t.navigator;function p(t){return!!h&&(!!l&&l.brands.some((({brand:e})=>e&&-1!=e.indexOf(t))))}function m(e){var n;return(n=t.navigator)&&(n=n.userAgent)||(n=""),-1!=n.indexOf(e)}function y(){return!!h&&(!!l&&l.brands.length>0)}function b(){return y()?p("Chromium"):(m("Chrome")||m("CriOS"))&&!(!y()&&m("Edge"))||m("Silk")}l=g&&g.userAgentData||null;var v=!y()&&(m("Trident")||m("MSIE"));!m("Android")||b(),b(),m("Safari")&&(b()||!y()&&m("Coast")||!y()&&m("Opera")||!y()&&m("Edge")||(y()?p("Microsoft Edge"):m("Edg/"))||y()&&p("Opera"));var w={},_=null;function S(t){var e=t.length,n=3*e/4;n%3?n=Math.floor(n):-1!="=.".indexOf(t[e-1])&&(n=-1!="=.".indexOf(t[e-2])?n-2:n-1);var r=new Uint8Array(n),i=0;return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=_[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}A();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){r[i++]=t})),i!==n?r.subarray(0,i):r}function A(){if(!_){_={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++){var r=t.concat(e[n].split(""));w[n]=r;for(var i=0;i<r.length;i++){var o=r[i];void 0===_[o]&&(_[o]=i)}}}}var E="undefined"!=typeof Uint8Array,I=!v&&"function"==typeof btoa;function T(t){if(!I){var e;void 0===e&&(e=0),A(),e=w[e];var n=Array(Math.floor(t.length/3)),r=e[64]||"";let u=0,c=0;for(;u<t.length-2;u+=3){var i=t[u],o=t[u+1],s=t[u+2],a=e[i>>2];i=e[(3&i)<<4|o>>4],o=e[(15&o)<<2|s>>6],s=e[63&s],n[c++]=a+i+o+s}switch(a=0,s=r,t.length-u){case 2:s=e[(15&(a=t[u+1]))<<2]||r;case 1:t=t[u],n[c]=e[t>>2]+e[(3&t)<<4|a>>4]+s+r}return n.join("")}for(e="",n=0,r=t.length-10240;n<r;)e+=String.fromCharCode.apply(null,t.subarray(n,n+=10240));return e+=String.fromCharCode.apply(null,n?t.subarray(n):t),btoa(e)}const x=/[-_.]/g,P={"-":"+",_:"/",".":"="};function B(t){return P[t]||""}function U(t){if(!I)return S(t);x.test(t)&&(t=t.replace(x,B)),t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function N(t){return E&&null!=t&&t instanceof Uint8Array}var O={};let L;function F(t){if(t!==O)throw Error("illegal external caller")}function k(){return L||=new j(null,O)}function V(t){F(O);var e=t.F;return null==(e=null==e||N(e)?e:"string"==typeof e?U(e):null)?e:t.F=e}var j=class{constructor(t,e){if(F(e),this.F=t,null!=t&&0===t.length)throw Error("ByteString should be constructed with non-empty values")}K(){return new Uint8Array(V(this)||0)}};function M(t,e){t.__closure__error__context__984382||(t.__closure__error__context__984382={}),t.__closure__error__context__984382.severity=e}let C;function G(){const e=Error();M(e,"incident"),function(e){t.setTimeout((()=>{throw e}),0)}(e)}function D(){const t=Error("int32");return M(t,"warning"),t}function z(){return"function"==typeof BigInt}function $(t){return Array.prototype.slice.call(t)}var W="function"==typeof Symbol&&"symbol"==typeof Symbol();function R(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol():t}var H=R(),q=R("2ex"),J=R("1oa"),K=R("0dg"),X=W?(t,e)=>{t[H]|=e}:(t,e)=>{void 0!==t.s?t.s|=e:Object.defineProperties(t,{s:{value:e,configurable:!0,writable:!0,enumerable:!1}})},Y=W?(t,e)=>{t[H]&=~e}:(t,e)=>{void 0!==t.s&&(t.s&=~e)},Q=W?t=>0|t[H]:t=>0|t.s,Z=W?t=>t[H]:t=>t.s,tt=W?(t,e)=>{t[H]=e}:(t,e)=>{void 0!==t.s?t.s=e:Object.defineProperties(t,{s:{value:e,configurable:!0,writable:!0,enumerable:!1}})};function et(t,e){tt(e,-14591&(0|t))}function nt(t,e){tt(e,-14557&(34|t))}var rt,it={},ot={};function st(t){return!(!t||"object"!=typeof t||t.g!==ot)}function at(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)&&t.constructor===Object}function ut(t,e,n){if(null!=t)if("string"==typeof t)t=t?new j(t,O):k();else if(t.constructor!==j)if(N(t))t=t.length?new j(n?t:new Uint8Array(t),O):k();else{if(!e)throw Error();t=void 0}return t}function ct(t){return!(!Array.isArray(t)||t.length)&&!!(1&Q(t))}const lt=[];function ht(t){if(2&t)throw Error()}let ft;function dt(t,e){(e=ft?e[ft]:void 0)&&(t[ft]=$(e))}tt(lt,55),rt=Object.freeze(lt);var gt=Object.freeze({});Object.freeze({});var pt=Object.freeze({}),mt="function"==typeof t.BigInt&&"bigint"==typeof t.BigInt(0),yt=t=>mt?t>=vt&&t<=_t:"-"===t[0]?St(t,bt):St(t,wt);const bt=Number.MIN_SAFE_INTEGER.toString(),vt=mt?BigInt(Number.MIN_SAFE_INTEGER):void 0,wt=Number.MAX_SAFE_INTEGER.toString(),_t=mt?BigInt(Number.MAX_SAFE_INTEGER):void 0;function St(t,e){if(t.length>e.length)return!1;if(t.length<e.length||t===e)return!0;for(let n=0;n<t.length;n++){const r=t[n],i=e[n];if(r>i)return!1;if(r<i)return!0}}const At="function"==typeof Uint8Array.prototype.slice;let Et,It=0,Tt=0;function xt(t){const e=t>>>0;It=e,Tt=(t-e)/4294967296>>>0}function Pt(t){if(t<0){xt(-t);const[e,n]=kt(It,Tt);It=e>>>0,Tt=n>>>0}else xt(t)}function Bt(t){const e=Et||=new DataView(new ArrayBuffer(8));e.setFloat32(0,+t,!0),Tt=0,It=e.getUint32(0,!0)}function Ut(t,e){return 4294967296*e+(t>>>0)}function Nt(t,e){const n=2147483648&e;return n&&(e=~e>>>0,0==(t=1+~t>>>0)&&(e=e+1>>>0)),t=Ut(t,e),n?-t:t}function Ot(t,e){if(t>>>=0,(e>>>=0)<=2097151)var n=""+(4294967296*e+t);else z()?n=""+(BigInt(e)<<BigInt(32)|BigInt(t)):(t=(16777215&t)+6777216*(n=16777215&(t>>>24|e<<8))+6710656*(e=e>>16&65535),n+=8147497*e,e*=2,t>=1e7&&(n+=t/1e7>>>0,t%=1e7),n>=1e7&&(e+=n/1e7>>>0,n%=1e7),n=e+Lt(n)+Lt(t));return n}function Lt(t){return t=String(t),"0000000".slice(t.length)+t}function Ft(t){if(t.length<16)Pt(Number(t));else if(z())t=BigInt(t),It=Number(t&BigInt(4294967295))>>>0,Tt=Number(t>>BigInt(32)&BigInt(4294967295));else{const e=+("-"===t[0]);Tt=It=0;const n=t.length;for(let r=e,i=(n-e)%6+e;i<=n;r=i,i+=6){const e=Number(t.slice(r,i));Tt*=1e6,It=1e6*It+e,It>=4294967296&&(Tt+=Math.trunc(It/4294967296),Tt>>>=0,It>>>=0)}if(e){const[t,e]=kt(It,Tt);It=t,Tt=e}}}function kt(t,e){return e=~e,t?t=1+~t:e+=1,[t,e]}function Vt(t){return null==t||"number"==typeof t?t:"NaN"===t||"Infinity"===t||"-Infinity"===t?Number(t):void 0}function jt(t){if(null!=t&&"boolean"!=typeof t){var e=typeof t;throw Error(`Expected boolean but got ${"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}: ${t}`)}return t}const Mt=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function Ct(t){const e=typeof t;switch(e){case"bigint":return!0;case"number":return Number.isFinite(t)}return"string"===e&&Mt.test(t)}function Gt(t){if(null==t)return t;if("string"==typeof t){if(!t)return;t=+t}return"number"==typeof t&&Number.isFinite(t)?0|t:void 0}function Dt(t){return"-"!==t[0]&&(t.length<20||20===t.length&&Number(t.substring(0,6))<184467)}function zt(t){return t=Math.trunc(t),Number.isSafeInteger(t)||(Pt(t),t=Nt(It,Tt)),t}function $t(t){var e=Math.trunc(Number(t));if(Number.isSafeInteger(e))return String(e);if(-1!==(e=t.indexOf("."))&&(t=t.substring(0,e)),!("-"===t[0]?t.length<20||20===t.length&&Number(t.substring(0,7))>-922337:t.length<19||19===t.length&&Number(t.substring(0,6))<922337))if(Ft(t),t=It,2147483648&(e=Tt))if(z())t=""+(BigInt(0|e)<<BigInt(32)|BigInt(t>>>0));else{const[n,r]=kt(t,e);t="-"+Ot(n,r)}else t=Ot(t,e);return t}function Wt(t){return null==t?t:"bigint"==typeof t?(yt(t)?t=Number(t):(t=BigInt.asIntN(64,t),t=yt(t)?Number(t):String(t)),t):Ct(t)?"number"==typeof t?zt(t):$t(t):void 0}function Rt(t){if(null==t)return t;var e=typeof t;if("bigint"===e)return String(BigInt.asUintN(64,t));if(Ct(t)){if("string"===e)return e=Math.trunc(Number(t)),Number.isSafeInteger(e)&&e>=0?t=String(e):(-1!==(e=t.indexOf("."))&&(t=t.substring(0,e)),Dt(t)||(Ft(t),t=Ot(It,Tt))),t;if("number"===e)return(t=Math.trunc(t))>=0&&Number.isSafeInteger(t)?t:function(t){if(t<0){Pt(t);const e=Ot(It,Tt);return t=Number(e),Number.isSafeInteger(t)?t:e}return Dt(String(t))?t:(Pt(t),Ut(It,Tt))}(t)}}function Ht(t){if("string"!=typeof t)throw Error();return t}function qt(t){if(null!=t&&"string"!=typeof t)throw Error();return t}function Jt(t){return null==t||"string"==typeof t?t:void 0}function Kt(t,e,n){if(null!=t&&"object"==typeof t&&t.D===it)return t;if(Array.isArray(t)){var r=Q(t),i=r;return 0===i&&(i|=32&n),(i|=2&n)!==r&&tt(t,i),new e(t)}}function Xt(t){if(void 0===Zt&&(Zt="function"==typeof Proxy?ae(Proxy):null),!Zt||!se())return t;let e=Yt?.get(t);return e||(Math.random()>.01?t:(function(t){if(void 0===ee){const t=new Zt([],{});ee=1===Array.prototype.concat.call([],t).length}ee&&"function"==typeof Symbol&&Symbol.isConcatSpreadable&&(t[Symbol.isConcatSpreadable]=!0)}(t),e=new Zt(t,{set:(t,e,n)=>(G(),t[e]=n,!0)}),function(t,e){(Yt||=new te).set(t,e),(Qt||=new te).set(e,t)}(t,e),e))}let Yt,Qt,Zt,te,ee,ne,re,ie,oe;function se(){return void 0===te&&(te="function"==typeof WeakMap?ae(WeakMap):null),te}function ae(t){try{return-1!==t.toString().indexOf("[native code]")?t:null}catch{return null}}function ue(t,e,n){if(f&&se()){if(ne?.get(e)?.get(t)){if(n)return}else if(Math.random()>.01)return;var r=t.length;n={length:r};for(var i=0;i<Math.min(r,10);i++){if(r<=10)var o=i;else{o=r/10;const t=Math.floor(i*o);o=t+Math.floor(Math.random()*(Math.floor((i+1)*o)-t))}n[o]=t[o]}le(t,n)?((i=(r=ne||=new te).get(e))||(i=new te,r.set(e,i)),i.set(t,n)):(G(),fe(t,e))}}function ce(t,e){const n=ne?.get(e)?.get(t);n&&!le(t,n)&&(G(),fe(t,e))}function le(t,e){if(t.length!==e.length)return!1;for(const i in e){var n,r=Number(i);if((n=Number.isInteger(r))&&(n=t[r],r=e[r],n=!(Number.isNaN(n)?Number.isNaN(r):n===r)),n)return!1}return!0}function he(t){if(t&&ne?.has(t)){var e=t.l;if(e)for(let n=0;n<e.length;n++){const r=e[n];if(n===e.length-1&&at(r))for(const e in r){const n=r[e];Array.isArray(n)&&ce(n,t)}else Array.isArray(r)&&ce(r,t)}}}function fe(t,e){ne?.get(e)?.delete(t)}function de(t,e){return t=ge(t,e[0],e[1]),X(t,16384),t}function ge(t,e,n){if(null==t&&(t=re),re=void 0,null==t){var r=96;n?(t=[n],r|=512):t=[],e&&(r=-33521665&r|(1023&e)<<15)}else{if(!Array.isArray(t))throw Error("narr");if(2048&(r=Q(t)))throw Error("farr");if(64&r)return t;if(r|=64,n&&(r|=512,n!==t[0]))throw Error("mid");t:{const i=(n=t).length;if(i){const t=i-1;if(at(n[t])){if((e=t-(+!!(512&(r|=256))-1))>=1024)throw Error("pvtlmt");r=-33521665&r|(1023&e)<<15;break t}}if(e){if((e=Math.max(e,i-(+!!(512&r)-1)))>1024)throw Error("spvt");r=-33521665&r|(1023&e)<<15}}}return tt(t,r),t}function pe(t,e,n,r,i){if(null!=t){if(Array.isArray(t))t=ct(t)?void 0:i&&2&Q(t)?t:me(t,e,n,void 0!==r,i);else if(at(t)){const o={};for(let s in t)o[s]=pe(t[s],e,n,r,i);t=o}else t=e(t,r);return t}}function me(t,e,n,r,i){const o=r||n?Q(t):0;r=r?!!(32&o):void 0;const s=$(t);for(let t=0;t<s.length;t++)s[t]=pe(s[t],e,n,r,i);return n&&(dt(s,t),n(o,s)),s}function ye(t){return t.D===it?t.toJSON():function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"bigint":return yt(t)?Number(t):String(t);case"boolean":return t?1:0;case"object":if(t)if(Array.isArray(t)){if(ct(t))return}else{if(N(t))return T(t);if(t instanceof j){const e=t.F;return null==e?"":"string"==typeof e?e:t.F=T(e)}}}return t}(t)}function be(t,e,n=nt){if(null!=t){if(E&&t instanceof Uint8Array)return e?t:new Uint8Array(t);if(Array.isArray(t)){var r=Q(t);return 2&r?t:(e&&=0===r||!!(32&r)&&!(64&r||!(16&r)),e?(tt(t,-12293&(34|r)),t):me(t,be,4&r?nt:n,!0,!0))}return t.D===it&&(n=t.l,t=2&(r=Z(n))?t:we(t,n,r,!0)),t}}function ve(t){const e=t.l;return we(t,e,Z(e),!1)}function we(t,e,n,r){return he(t),t=t.constructor,re=e=_e(e,n,r),e=new t(e),re=void 0,e}function _e(t,e,n){const r=n||2&e?nt:et,i=!!(32&e);return t=function(t,e,n){const r=$(t);var i=r.length;const o=256&e?r[i-1]:void 0;for(i+=o?-1:0,e=512&e?1:0;e<i;e++)r[e]=n(r[e]);if(o){e=r[e]={};for(const t in o)e[t]=n(o[t])}return dt(r,t),r}(t,e,(t=>be(t,i,r))),X(t,32|(n?2:0)),t}function Se(t){const e=t.l,n=Z(e);return 2&n?we(t,e,n,!1):t}function Ae(t,e,n,r){return!(4&e)||null!=n&&(!r&&0===n&&(4096&e||8192&e)&&(t.constructor[K]=1+(0|t.constructor[K]))<5&&G(),0!==n&&!(n&e))}function Ee(t,e){return Te(t=t.l,Z(t),e)}function Ie(t,e,n,r){if(!((e=r+(+!!(512&e)-1))<0||e>=t.length||e>=n))return t[e]}function Te(t,e,n,r){if(-1===n)return null;const i=e>>15&1023||536870912;if(!(n>=i)){var o=t.length;return r&&256&e&&null!=(r=t[o-1][n])?(Ie(t,e,i,n)&&null!=q&&((e=(t=C??={})[q]||0)>=4||(t[q]=e+1,G())),r):Ie(t,e,i,n)}return 256&e?t[t.length-1][n]:void 0}function xe(t,e,n){const r=t.l;let i=Z(r);return ht(i),Pe(r,i,e,n),t}function Pe(t,e,n,r){const i=e>>15&1023||536870912;if(n>=i){let o,s=e;if(256&e)o=t[t.length-1];else{if(null==r)return s;o=t[i+(+!!(512&e)-1)]={},s|=256}return o[n]=r,n<i&&(t[n+(+!!(512&e)-1)]=void 0),s!==e&&tt(t,s),s}return t[n+(+!!(512&e)-1)]=r,256&e&&(n in(t=t[t.length-1])&&delete t[n]),e}function Be(t,e,n,r,i){var o=2&e;i=Te(t,e,n,i),Array.isArray(i)||(i=rt);const s=!(2&r);r=!(1&r);const a=!!(32&e);let u=Q(i);return 0!==u||!a||o||s?1&u||(u|=1,tt(i,u)):(u|=33,tt(i,u)),o?(t=!1,2&u||(X(i,34),t=!!(4&u)),(r||t)&&Object.freeze(i)):(o=!!(2&u)||!!(2048&u),r&&o?(i=$(i),o=1,a&&!s&&(o|=32),tt(i,o),Pe(t,e,n,i)):s&&32&u&&!o&&Y(i,32)),i}function Ue(t){t=t.l;let e=Z(t);const n=Te(t,e,1),r=ut(n,!0,!!(34&e));return null!=r&&r!==n&&Pe(t,e,1,r),r}function Ne(t,e,n,r,i,o){const s=t.l;let a=Z(s);r=2&a?1:r,o=!!o,i=Oe(s,a,e,i);var u=Q(i),c=i;if(ce(c,t),2!==r&&1!==r||fe(c,t),Ae(t,u,void 0,o)){4&u&&(i=$(i),u=qe(u,a),a=Pe(s,a,e,i));let t=c=0;for(;c<i.length;c++){const e=n(i[c]);null!=e&&(i[t++]=e)}t<c&&(i.length=t),u=-4097&(20|(u=Le(u,a))),tt(i,u&=-8193),2&u&&Object.freeze(i)}let l;return 1===r||4===r&&32&u?Fe(u)||(t=u,(u|=2)!==t&&tt(i,u),Object.freeze(i)):(n=5===r&&(!!(32&u)||Fe(u)||!!Yt?.get(i)),(2===r||n)&&Fe(u)&&(i=$(i),u=Je(u=qe(u,a),a,o),tt(i,u),a=Pe(s,a,e,i)),Fe(u)||(e=u,(u=Je(u,a,o))!==e&&tt(i,u)),n?(l=Xt(i),ue(i,t,!0)):2!==r||o||Yt?.delete(i)),l||i}function Oe(t,e,n,r){return t=Te(t,e,n,r),Array.isArray(t)?t:rt}function Le(t,e){return 0===t&&(t=qe(t,e)),1|t}function Fe(t){return!!(2&t)&&!!(4&t)||!!(2048&t)}function ke(t,e){t=t.l;let n=Z(t);ht(n),Pe(t,n,2,""===e?void 0:e)}function Ve(t,e){var n=hi;return Ce(je(t=t.l),t,Z(t),n)===e?e:-1}function je(t){if(W)return t[J]??(t[J]=new Map);if(J in t)return t[J];const e=new Map;return Object.defineProperty(t,J,{value:e}),e}function Me(t,e,n,r){const i=je(t),o=Ce(i,t,e,n);return o!==r&&(o&&(e=Pe(t,e,o)),i.set(n,r)),e}function Ce(t,e,n,r){let i=t.get(r);if(null!=i)return i;i=0;for(let t=0;t<r.length;t++){const o=r[t];null!=Te(e,n,o)&&(0!==i&&(n=Pe(e,n,i)),i=o)}return t.set(r,i),i}function Ge(t,e,n,r){let i,o=Z(t);if(null!=(r=Te(t,o,n,r))&&r.D===it)return(e=Se(r))!==r&&Pe(t,o,n,e),e.l;if(Array.isArray(r)){const t=Q(r);i=2&t?_e(r,t,!1):r,i=de(i,e)}else i=de(void 0,e);return i!==r&&Pe(t,o,n,i),i}function De(t,e,n,r){t=t.l;let i=Z(t);return(e=Kt(r=Te(t,i,n,r),e,i))!==r&&null!=e&&Pe(t,i,n,e),e}function ze(t,e,n){if(null==(e=De(t,e,n,!1)))return e;t=t.l;let r=Z(t);if(!(2&r)){const i=Se(e);i!==e&&Pe(t,r,n,e=i)}return e}function $e(t,e,n,r,i,o){var s=t.l,a=!!(2&e);r=a?1:r,i=!!i,o&&=!a,a=Oe(s,e,1);var u=Q(a),c=a;if(ce(c,t),2!==r&&1!==r||fe(c,t),!(c=!!(4&u))){var l=a,h=e;const t=!!(2&(u=Le(u,e)));t&&(h|=2);let r=!t,i=!0,o=0,s=0;for(;o<l.length;o++){const e=Kt(l[o],n,h);if(e instanceof n){if(!t){const t=!!(2&Q(e.l));r&&=!t,i&&=t}l[s++]=e}}s<o&&(l.length=s),u|=4,u=i?16|u:-17&u,tt(l,u=r?8|u:-9&u),t&&Object.freeze(l)}if(o&&!(8&u||!a.length&&(1===r||4===r&&32&u))){for(Fe(u)?(a=$(a),u=qe(u,e),e=Pe(s,e,1,a)):fe(a,t),n=a,o=u,l=0;l<n.length;l++)(u=n[l])!==(h=Se(u))&&(n[l]=h);o|=8,o=n.length?-17&o:16|o,tt(n,o),u=o}let f;return 1===r||4===r&&32&u?Fe(u)||(t=u,(u|=!a.length||16&u&&(!c||32&u)?2:2048)!==t&&tt(a,u),Object.freeze(a)):(c=5===r&&(!!(32&u)||Fe(u)||!!Yt?.get(a)),(2===r||c)&&Fe(u)&&(a=$(a),u=Je(u=qe(u,e),e,i),tt(a,u),e=Pe(s,e,1,a)),Fe(u)||(s=u,(u=Je(u,e,i))!==s&&tt(a,u)),c?(f=Xt(a),ue(a,t,!0)):2!==r||i||Yt?.delete(a)),f||a}function We(t,e){const n=Z(t.l);return $e(t,n,e,void 0===gt?2:5,!1,!(2&n))}function Re(t,e,n,r){return null==r&&(r=void 0),xe(t,n,r)}function He(t,e,n){var r=yi;null==n&&(n=void 0);t:{t=t.l;let i=Z(t);if(ht(i),null==n){const n=je(t);if(Ce(n,t,i,r)!==e)break t;n.set(r,0)}else i=Me(t,i,r,e);Pe(t,i,e,n)}}function qe(t,e){return-2049&(t=32|(2&e?2|t:-3&t))}function Je(t,e,n){return 32&e&&n||(t&=-33),t}function Ke(t,e){var n=Yr;const r=Z(t.l);ht(r),t=$e(t,r,n,2,!0),e=null!=e?e:new n,t.push(e),2&Q(e.l)?Y(t,8):Y(t,16)}function Xe(t,e){return t??e}function Ye(t,e,n){{const a=t.l;let u=Z(a);if(ht(u),null==n)Pe(a,u,e);else{n=Qt?.get(n)||n;var r,i=Q(n),o=i,s=!!(2&i)||Object.isFrozen(n);if((r=!s)&&(r=void 0===pt||!1),Ae(t,i)){i=21,s&&(n=$(n),o=0,i=Je(i=qe(i,u),u,!0));for(let t=0;t<n.length;t++)n[t]=Ht(n[t])}r?(n=$(n),o=0,i=Je(i=qe(i,u),u,!0)):s||ue(n,t),i!==o&&tt(n,i),Pe(a,u,e,n)}}}function Qe(t,e,n){ht(Z(t.l)),Ne(t,e,Jt,2,void 0,!0).push(Ht(n))}function Ze(t,e){return Error(`Invalid wire type: ${t} (at position ${e})`)}function tn(){return Error("Failed to read varint, encoding is invalid.")}function en(t,e){return Error(`Tried to read past the end of the data ${e} > ${t}`)}function nn(t){if("string"==typeof t)return{buffer:U(t),A:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),A:!1};if(t.constructor===Uint8Array)return{buffer:t,A:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),A:!1};if(t.constructor===j)return{buffer:V(t)||new Uint8Array(0),A:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),A:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function rn(t,e){let n,r=0,i=0,o=0;const s=t.i;let a=t.g;do{n=s[a++],r|=(127&n)<<o,o+=7}while(o<32&&128&n);for(o>32&&(i|=(127&n)>>4),o=3;o<32&&128&n;o+=7)n=s[a++],i|=(127&n)<<o;if(ln(t,a),n<128)return e(r>>>0,i>>>0);throw tn()}function on(t){let e=0,n=t.g;const r=n+10,i=t.i;for(;n<r;){const r=i[n++];if(e|=r,0==(128&r))return ln(t,n),!!(127&e)}throw tn()}function sn(t){const e=t.i;let n=t.g,r=e[n++],i=127&r;if(128&r&&(r=e[n++],i|=(127&r)<<7,128&r&&(r=e[n++],i|=(127&r)<<14,128&r&&(r=e[n++],i|=(127&r)<<21,128&r&&(r=e[n++],i|=r<<28,128&r&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++])))))throw tn();return ln(t,n),i}function an(t){var e=t.i;const n=t.g;var r=e[n],i=e[n+1];const o=e[n+2];return e=e[n+3],ln(t,t.g+4),t=2*((i=(r<<0|i<<8|o<<16|e<<24)>>>0)>>31)+1,r=i>>>23&255,i&=8388607,255==r?i?NaN:t*(1/0):0==r?1401298464324817e-60*t*i:t*Math.pow(2,r-150)*(i+8388608)}function un(t){return sn(t)}function cn(t,e,{G:n=!1}={}){t.G=n,e&&(e=nn(e),t.i=e.buffer,t.m=e.A,t.v=0,t.j=t.i.length,t.g=t.v)}function ln(t,e){if(t.g=e,e>t.j)throw en(t.j,e)}function hn(t,e){if(e<0)throw Error(`Tried to read a negative byte length: ${e}`);const n=t.g,r=n+e;if(r>t.j)throw en(e,t.j-n);return t.g=r,n}function fn(t,e){if(0==e)return k();var n=hn(t,e);return t.G&&t.m?n=t.i.subarray(n,n+e):(t=t.i,n=n===(e=n+e)?new Uint8Array(0):At?t.slice(n,e):new Uint8Array(t.subarray(n,e))),0==n.length?k():new j(n,O)}var dn=[];function gn(t){var e=t.g;if(e.g==e.j)return!1;t.j=t.g.g;var n=sn(t.g)>>>0;if(e=n>>>3,!((n&=7)>=0&&n<=5))throw Ze(n,t.j);if(e<1)throw Error(`Invalid field number: ${e} (at position ${t.j})`);return t.m=e,t.i=n,!0}function pn(t){switch(t.i){case 0:0!=t.i?pn(t):on(t.g);break;case 1:ln(t=t.g,t.g+8);break;case 2:if(2!=t.i)pn(t);else{var e=sn(t.g)>>>0;ln(t=t.g,t.g+e)}break;case 5:ln(t=t.g,t.g+4);break;case 3:for(e=t.m;;){if(!gn(t))throw Error("Unmatched start-group tag: stream EOF");if(4==t.i){if(t.m!=e)throw Error("Unmatched end-group tag");break}pn(t)}break;default:throw Ze(t.i,t.j)}}function mn(t,e,n){const r=t.g.j,i=sn(t.g)>>>0,o=t.g.g+i;let s=o-r;if(s<=0&&(t.g.j=o,n(e,t,void 0,void 0,void 0),s=o-t.g.g),s)throw Error(`Message parsing ended unexpectedly. Expected to read ${i} bytes, instead read ${i-s} bytes, either the data ended unexpectedly or the message misreported its own length`);t.g.g=o,t.g.j=r}function yn(t){var e=sn(t.g)>>>0,a=hn(t=t.g,e);if(t=t.i,s){var u,c=t;(u=o)||(u=o=new TextDecoder("utf-8",{fatal:!0})),e=a+e,c=0===a&&e===c.length?c:c.subarray(a,e);try{var l=u.decode(c)}catch(t){if(void 0===i){try{u.decode(new Uint8Array([128]))}catch(t){}try{u.decode(new Uint8Array([97])),i=!0}catch(t){i=!1}}throw!i&&(o=void 0),t}}else{e=(l=a)+e,a=[];let i,o=null;for(;l<e;){var h=t[l++];h<128?a.push(h):h<224?l>=e?n():(i=t[l++],h<194||128!=(192&i)?(l--,n()):a.push((31&h)<<6|63&i)):h<240?l>=e-1?n():(i=t[l++],128!=(192&i)||224===h&&i<160||237===h&&i>=160||128!=(192&(u=t[l++]))?(l--,n()):a.push((15&h)<<12|(63&i)<<6|63&u)):h<=244?l>=e-2?n():(i=t[l++],128!=(192&i)||i-144+(h<<28)>>30!=0||128!=(192&(u=t[l++]))||128!=(192&(c=t[l++]))?(l--,n()):(h=(7&h)<<18|(63&i)<<12|(63&u)<<6|63&c,h-=65536,a.push(55296+(h>>10&1023),56320+(1023&h)))):n(),a.length>=8192&&(o=r(o,a),a.length=0)}l=r(o,a)}return l}function bn(t){const e=sn(t.g)>>>0;return fn(t.g,e)}function vn(t,e,n){var r=sn(t.g)>>>0;for(r=t.g.g+r;t.g.g<r;)n.push(e(t.g))}var wn=[];let _n;function Sn(t,e,n){e.g?e.j(t,e.g,e.i,n,!0):e.j(t,e.i,n,!0)}var An=class{constructor(t,e){this.l=ge(t,e)}toJSON(){return En(this)}A(){return!!(2&Q(this.l))}};function En(t){he(t),t=_n?t.l:me(t.l,ye,void 0,void 0,!1);{var e=!_n;let c=t.length;if(c){var n=t[c-1],r=at(n);r?c--:n=void 0;var i=t;if(r){t:{var o,s=n,a=!1;if(s)for(let t in s)isNaN(+t)?(o??={})[t]=s[t]:(r=s[t],Array.isArray(r)&&(ct(r)||st(r)&&0===r.size)&&(r=null),null==r&&(a=!0),null!=r&&((o??={})[t]=r));if(a||(o=s),o)for(let t in o){a=o;break t}a=null}s=null==a?null!=n:a!==n}for(;c>0&&(null==(o=i[c-1])||ct(o)||st(o)&&0===o.size);c--)var u=!0;(i!==t||s||u)&&(e?(u||s||a)&&(i.length=c):i=Array.prototype.slice.call(i,0,c),a&&i.push(a)),u=i}else u=t}return u}function In(t){return t?/^\d+$/.test(t)?(Ft(t),new Tn(It,Tt)):null:xn||=new Tn(0,0)}An.prototype.D=it,An.prototype.toString=function(){try{return _n=!0,En(this).toString()}finally{_n=!1}};var Tn=class{constructor(t,e){this.i=t>>>0,this.g=e>>>0}};let xn;function Pn(t){return t?/^-?\d+$/.test(t)?(Ft(t),new Bn(It,Tt)):null:Un||=new Bn(0,0)}var Bn=class{constructor(t,e){this.i=t>>>0,this.g=e>>>0}};let Un;function Nn(t,e,n){for(;n>0||e>127;)t.g.push(127&e|128),e=(e>>>7|n<<25)>>>0,n>>>=7;t.g.push(e)}function On(t,e){for(;e>127;)t.g.push(127&e|128),e>>>=7;t.g.push(e)}function Ln(t,e){if(e>=0)On(t,e);else{for(let n=0;n<9;n++)t.g.push(127&e|128),e>>=7;t.g.push(1)}}function Fn(t){var e=It;t.g.push(e>>>0&255),t.g.push(e>>>8&255),t.g.push(e>>>16&255),t.g.push(e>>>24&255)}function kn(t,e){0!==e.length&&(t.j.push(e),t.i+=e.length)}function Vn(t,e,n){On(t.g,8*e+n)}function jn(t,e){return Vn(t,e,2),e=t.g.end(),kn(t,e),e.push(t.i),e}function Mn(t,e){var n=e.pop();for(n=t.i+t.g.length()-n;n>127;)e.push(127&n|128),n>>>=7,t.i++;e.push(n),t.i++}function Cn(t,e,n){Vn(t,e,2),On(t.g,n.length),kn(t,t.g.end()),kn(t,n)}class Gn{constructor(t,e,n){this.g=t,this.i=e,this.I=n}}function Dn(t){return Array.isArray(t)?t[0]instanceof Gn?t:[Ur,t]:[t,void 0]}function zn(t,e){if(Array.isArray(e)){var n=Q(e);if(4&n)return e;for(var r=0,i=0;r<e.length;r++){const n=t(e[r]);null!=n&&(e[i++]=n)}return i<r&&(e.length=i),tt(e,-12289&(5|n)),2&n&&Object.freeze(e),e}}const $n=Symbol();function Wn(t){let e=t[$n];if(!e){const n=rr(t),r=n.i;e=r?(t,e)=>r(t,e,n):(t,e)=>{for(;gn(e)&&4!=e.i;){var r=e.m;let s=n[r];const a=!s;let u=!1;if(!s){var i=n.C;if(i){var o=i[r];o&&(u=i.B?.[r],(!d||u)&&(i=Rn(o))&&(s=n[r]=i))}}s&&s(e,t,r)||(r=(i=e).j,pn(i),i.H?i=void 0:(o=i.g.g-r,i.g.g=r,i=fn(i.g,o)),r=t,i&&(ft||=Symbol(),(o=r[ft])?o.push(i):r[ft]=[i])),a&&s&&!u&&cr++<5&&G()}},t[$n]=e}return e}function Rn(t){const e=(t=Dn(t))[0].g;if(t=t[1]){const n=Wn(t),r=rr(t).g;return(t,i,o)=>e(t,i,o,r,n)}return e}function Hn(t,e,n){t[e]=n}function qn(t,e,n,r){var i=Hn;e.g=function(t){switch(typeof t){case"boolean":return ie||=[0,void 0,!0];case"number":return t>0?void 0:0===t?oe||=[0,void 0]:[-t,void 0];case"string":return[0,t];case"object":return t}}(t[0]);let o=0;var s=t[++o];s&&s.constructor===Object&&(e.C=s,"function"==typeof(s=t[++o])&&(e.i=s,e.j=t[++o],s=t[++o]));const a={};for(;Array.isArray(s)&&"number"==typeof s[0]&&s[0]>0;){for(var u=0;u<s.length;u++)a[s[u]]=s;s=t[++o]}for(u=1;void 0!==s;){let h;"number"==typeof s&&(u+=s,s=t[++o]);var c=void 0;if(s instanceof Gn?h=s:(h=Nr,o--),h.I){s=t[++o],c=t;var l=o;"function"==typeof s&&(s=s(),c[l]=s),c=s}for(l=u+1,"number"==typeof(s=t[++o])&&s<0&&(l-=s,s=t[++o]);u<l;u++){const t=a[u];i(e,u,c?r(h,c,t):n(h,t))}}return e}const Jn=Symbol();function Kn(t){let e=t[Jn];if(!e){const n=Zn(t);e=(t,e)=>or(t,e,n),t[Jn]=e}return e}const Xn=Symbol();function Yn(t){return t.i}function Qn(t,e){let n,r;const i=t.i;return(t,o,s)=>i(t,o,s,r||=Zn(e).g,n||=Kn(e))}function Zn(t){let e=t[Xn];return e||(e=qn(t,t[Xn]={},Yn,Qn))}const tr=Symbol();function er(t,e){const n=t.g;return e?(t,r,i)=>n(t,r,i,e):n}function nr(t,e,n){const r=t.g;let i,o;return(t,s,a)=>r(t,s,a,o||=rr(e).g,i||=Wn(e),n)}function rr(t){let e=t[tr];return e||(e=qn(t,t[tr]={},er,nr))}function ir(t,e){var n=t[e];if(n)return n;if(n=t.C){var r=n[e];if(r){var i=(r=Dn(r))[0].i;if(r=r[1],n=n.B?.[e],!d||n){if(r){const e=Kn(r),o=Zn(r).g;n=(n=t.j)?n(o,e):(t,n,r)=>i(t,n,r,o,e)}else n=i;return t[e]=n}}}}function or(t,e,n){for(var r=Z(t),i=+!!(512&r)-1,o=t.length,s=512&r?1:0,a=o+(256&r?-1:0);s<a;s++){const r=t[s];if(null==r)continue;const o=s-i,a=ir(n,o);if(!a)continue;const u=n.C;u?.[o]&&!u?.B?.[o]&&cr++<5&&G(),a(e,r,o)}if(256&r){r=t[o-1];for(let t in r)i=+t,!Number.isNaN(i)&&(null!=(o=r[t])&&(a=ir(n,i)))&&((s=n.C)?.[i]&&!s?.B?.[i]&&cr++<5&&G(),a(e,o,i))}if(t=ft?t[ft]:void 0)for(kn(e,e.g.end()),n=0;n<t.length;n++)kn(e,V(t[n])||new Uint8Array(0))}function sr(t,e){return new Gn(t,e,!1)}function ar(t,e){return new Gn(t,e,!1)}function ur(t,e,n){Pe(t,Z(t),e,n)}let cr=0;function lr(t,e,n){if(e=function(t){if(null==t)return t;const e=typeof t;if("bigint"===e)return String(BigInt.asIntN(64,t));if(Ct(t)){if("string"===e)return $t(t);if("number"===e)return zt(t)}}(e),null!=e){if("string"==typeof e)Pn(e);if(null!=e)switch(Vn(t,n,0),typeof e){case"number":t=t.g,Pt(e),Nn(t,It,Tt);break;case"bigint":n=BigInt.asUintN(64,e),n=new Bn(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),Nn(t.g,n.i,n.g);break;default:n=Pn(e),Nn(t.g,n.i,n.g)}}}function hr(t,e,n){null!=(e=Gt(e))&&null!=e&&(Vn(t,n,0),Ln(t.g,e))}function fr(t,e,n){null!=(e=null==e||"boolean"==typeof e?e:"number"==typeof e?!!e:void 0)&&(Vn(t,n,0),t.g.g.push(e?1:0))}function dr(t,e,n){null!=(e=Jt(e))&&Cn(t,n,c(e))}function gr(t,e,n,r,i){e instanceof An?(he(e),e=e.l):e=Array.isArray(e)?de(e,r):void 0,null!=e&&(n=jn(t,n),i(e,t),Mn(t,n))}function pr(t,e,n){null!=(e=null==e||"string"==typeof e||N(e)||e instanceof j?e:void 0)&&Cn(t,n,nn(e).buffer)}var mr,yr=sr((function(t,e,n){return 5===t.i&&(ur(e,n,an(t.g)),!0)}),(function(t,e,n){null!=(e=Vt(e))&&(Vn(t,n,5),t=t.g,Bt(e),Fn(t))})),br=ar((function(t,e,n){return(5===t.i||2===t.i)&&(e=Be(e,Z(e),n,2,!1),2==t.i?vn(t,an,e):e.push(an(t.g)),!0)}),(function(t,e,n){if(null!=(e=zn(Vt,e))&&e.length){Vn(t,n,2),On(t.g,4*e.length);for(let r=0;r<e.length;r++)n=t.g,Bt(e[r]),Fn(n)}})),vr=sr((function(t,e,n){return 0===t.i&&(ur(e,n,rn(t.g,Nt)),!0)}),lr),wr=sr((function(t,e,n){return 0===t.i&&(ur(e,n,0===(t=rn(t.g,Nt))?void 0:t),!0)}),lr),_r=sr((function(t,e,n){return 0===t.i&&(ur(e,n,rn(t.g,Ut)),!0)}),(function(t,e,n){if(null!=(e=Rt(e))){if("string"==typeof e)In(e);if(null!=e)switch(Vn(t,n,0),typeof e){case"number":t=t.g,Pt(e),Nn(t,It,Tt);break;case"bigint":n=BigInt.asUintN(64,e),n=new Tn(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),Nn(t.g,n.i,n.g);break;default:n=In(e),Nn(t.g,n.i,n.g)}}})),Sr=sr((function(t,e,n){return 0===t.i&&(ur(e,n,sn(t.g)),!0)}),hr),Ar=ar((function(t,e,n){return(0===t.i||2===t.i)&&(e=Be(e,Z(e),n,2,!1),2==t.i?vn(t,sn,e):e.push(sn(t.g)),!0)}),(function(t,e,n){if(null!=(e=zn(Gt,e))&&e.length){n=jn(t,n);for(let n=0;n<e.length;n++)Ln(t.g,e[n]);Mn(t,n)}})),Er=sr((function(t,e,n){return 0===t.i&&(ur(e,n,0===(t=sn(t.g))?void 0:t),!0)}),hr),Ir=sr((function(t,e,n){return 0===t.i&&(ur(e,n,on(t.g)),!0)}),fr),Tr=sr((function(t,e,n){return 0===t.i&&(ur(e,n,!1===(t=on(t.g))?void 0:t),!0)}),fr),xr=ar((function(t,e,n){if(2!==t.i)return!1;t=yn(t);const r=Z(e);return ht(r),Be(e,r,n,2).push(t),!0}),(function(t,e,n){if(null!=(e=zn(Jt,e)))for(let s=0;s<e.length;s++){var r=t,i=n,o=e[s];null!=o&&Cn(r,i,c(o))}})),Pr=sr((function(t,e,n){return 2===t.i&&(ur(e,n,""===(t=yn(t))?void 0:t),!0)}),dr),Br=sr((function(t,e,n){return 2===t.i&&(ur(e,n,yn(t)),!0)}),dr),Ur=new Gn((function(t,e,n,r,i){return 2===t.i&&(mn(t,Ge(e,r,n,!0),i),!0)}),gr,!0),Nr=new Gn((function(t,e,n,r,i){return 2===t.i&&(mn(t,Ge(e,r,n),i),!0)}),gr,!0);mr=new Gn((function(t,e,n,r,i){if(2!==t.i)return!1;r=de(void 0,r);let o=Z(e);ht(o);let s=Be(e,o,n,3);return o=Z(e),4&Q(s)&&(s=$(s),tt(s,-2079&(1|Q(s))),Pe(e,o,n,s)),s.push(r),mn(t,r,i),!0}),(function(t,e,n,r,i){if(Array.isArray(e))for(let o=0;o<e.length;o++)gr(t,e[o],n,r,i)}),!0);var Or=new Gn((function(t,e,n,r,i,o){return 2===t.i&&(Me(e,Z(e),o,n),mn(t,e=Ge(e,r,n),i),!0)}),gr,!0),Lr=sr((function(t,e,n){return 2===t.i&&(ur(e,n,bn(t)),!0)}),pr),Fr=sr((function(t,e,n){return 0===t.i&&(ur(e,n,sn(t.g)),!0)}),(function(t,e,n){null!=(e=Gt(e))&&(e=parseInt(e,10),Vn(t,n,0),Ln(t.g,e))}));class kr{constructor(t,e){this.i=t,this.g=e,this.j=Re,this.defaultValue=void 0}}function Vr(t,e){return(n,r)=>{if(wn.length){const t=wn.pop();t.o(r),cn(t.g,n,r),n=t}else n=new class{constructor(t,e){if(dn.length){const n=dn.pop();cn(n,t,e),t=n}else t=new class{constructor(t,e){this.i=null,this.m=!1,this.g=this.j=this.v=0,cn(this,t,e)}clear(){this.i=null,this.m=!1,this.g=this.j=this.v=0,this.G=!1}}(t,e);this.g=t,this.j=this.g.g,this.i=this.m=-1,this.o(e)}o({H:t=!1}={}){this.H=t}}(n,r);try{const r=new t,o=r.l;Wn(e)(o,n);var i=r}finally{n.g.clear(),n.m=-1,n.i=-1,wn.length<100&&wn.push(n)}return i}}var jr=[0,Pr,sr((function(t,e,n){return 2===t.i&&(ur(e,n,(t=bn(t))===k()?void 0:t),!0)}),(function(t,e,n){if(null!=e){if(e instanceof An){const r=e.P;return void(r&&(e=r(e),null!=e&&Cn(t,n,nn(e).buffer)))}if(Array.isArray(e))return}pr(t,e,n)}))],Mr=[0,Sr,Fr,Ir,-1,Ar,Fr,-1],Cr=class extends An{constructor(){super()}},Gr=[0,Ir,Br,Ir,Fr,-1,ar((function(t,e,n){return(0===t.i||2===t.i)&&(e=Be(e,Z(e),n,2,!1),2==t.i?vn(t,un,e):e.push(sn(t.g)),!0)}),(function(t,e,n){if(null!=(e=zn(Gt,e))&&e.length){n=jn(t,n);for(let n=0;n<e.length;n++)Ln(t.g,e[n]);Mn(t,n)}})),Br,-1,[0,Ir,-1],Fr,Ir,-1],Dr=[0,Br,-2],zr=class extends An{constructor(){super()}},$r=[0],Wr=[0,Sr,Ir,1,Ir,-3],Rr=[0,Br,Ir,-1,Sr,[0,[1,2,3,4,5,6,7],Or,$r,Or,Gr,Or,Dr,Or,Wr,Or,Mr,Or,[0,Br,-2],Or,[0,Br,Fr]],[0,Br],Ir,[0,[1,3],[2,4],Or,[0,Ar],-1,Or,[0,xr],-1,mr,[0,Br,-1]],Br],Hr=class extends An{constructor(t){super(t,2)}},qr={},Jr=qr.B={};qr[336783863]=Rr,Jr[336783863]=1;var Kr=[0,wr,-1,Tr,-3,wr,Ar,Pr,Er,wr,-1,Tr,Er,Tr,-2,Pr];function Xr(t){Qe(t,3,"TEXT:text_in")}var Yr=class extends An{constructor(t){super(t,500)}o(t){return Re(this,0,7,t)}},Qr=[-1,{B:{}}],Zr=[0,Br,1,Qr],ti=[0,Br,xr,Qr];function ei(t){Qe(t,10,"text_in")}var ni,ri=class extends An{constructor(){super(void 0,500)}o(t){return Re(this,0,1001,t)}};ri.prototype.g=(ni=[-500,mr,[-500,Pr,-1,xr,-3,[-2,qr,Ir],mr,jr,Er,-1,Zr,ti,mr,[0,Pr,Tr],Pr,Kr,Er,xr,987,xr],4,mr,[-500,Br,-1,[-1,{B:{}}],998,Br],mr,[-500,Br,xr,-1,[-2,{B:{}},Ir],997,xr,-1],Er,mr,[-500,Br,xr,Qr,998,xr],xr,Er,Zr,ti,mr,[0,Pr,-1,Qr],xr,-2,Kr,Pr,-1,Tr,979,Qr,mr,jr],function(){he(this);const t=new class{constructor(){this.j=[],this.i=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const t=this.g;return this.g=[],t}}}};or(this.l,t,Zn(ni)),kn(t,t.g.end());const e=new Uint8Array(t.i),n=t.j,r=n.length;let i=0;for(let t=0;t<r;t++){const r=n[t];e.set(r,i),i+=r.length}return t.j=[e],e});var ii=class extends An{constructor(t){super(t)}},oi=class extends An{constructor(t){super(t)}g(){return We(this,ii)}},si=class extends An{constructor(t){super(t)}},ai=Vr(class extends An{constructor(t){super(t)}},[0,mr,[0,1,Sr,Br,[0,mr,[0,Sr,yr,Br,-1]]],vr]),ui=class extends An{constructor(t){super(t)}},ci=class extends An{constructor(t){super(t)}J(){const t=Ue(this);return null==t?k():t}},li=class extends An{constructor(t){super(t)}},hi=[1,2],fi=Vr(class extends An{constructor(t){super(t)}},[0,mr,[0,hi,Or,[0,br],Or,[0,Lr],Sr,Br],vr]),di=class extends An{constructor(t){super(t)}},gi=class extends An{constructor(t){super(t)}},pi=[0,Ir,-1],mi=class extends An{constructor(t){super(t)}},yi=[1,2,3,4,5],bi=class extends An{constructor(t){super(t)}g(){return null!=Ue(this)}i(){return null!=Jt(Ee(this,2))}},vi=class extends An{constructor(t){super(t)}},wi=[0,[0,Lr,Br,[0,Sr,vr,-1],[0,_r,vr]],Ir,[0,yi,Or,Wr,Or,Gr,Or,Mr,Or,$r,Or,Dr],Fr],_i=class extends An{constructor(t){super(t)}},Si=new kr(462704549,_i);qr[462704549]=[0,wi,[0,Br,Sr,yr,xr,-1]],Jr[462704549]=1;var Ai=class extends An{constructor(t){super(t)}},Ei=new kr(477589892,Ai);function Ii(t,e){if(e=e?ve(e):new di,void 0!==t.displayNamesLocale?xe(e,1,qt(t.displayNamesLocale)):void 0===t.displayNamesLocale&&xe(e,1),void 0!==t.maxResults){var n=t.maxResults;if(null!=n){if("number"!=typeof n)throw D();if(!Number.isFinite(n))throw D();n|=0}xe(e,2,n)}else"maxResults"in t&&xe(e,2);if(void 0!==t.scoreThreshold){if(null!=(n=t.scoreThreshold)&&"number"!=typeof n)throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);xe(e,3,n)}else"scoreThreshold"in t&&xe(e,3);return void 0!==t.categoryAllowlist?Ye(e,4,t.categoryAllowlist):"categoryAllowlist"in t&&xe(e,4),void 0!==t.categoryDenylist?Ye(e,5,t.categoryDenylist):"categoryDenylist"in t&&xe(e,5),e}function Ti(t){const e={classifications:We(t,si).map((t=>function(t,e=-1,n=""){return{categories:t.map((t=>{var e=Xe(Gt(Ee(t,1)),0)??-1;const n=t.l;let r=Z(n);const i=Te(n,r,2),o=Vt(i);return null!=o&&o!==i&&Pe(n,r,2,o),{index:e,score:o??0??0,categoryName:Xe(Jt(Ee(t,3)),"")??"",displayName:Xe(Jt(Ee(t,4)),"")??""}})),headIndex:e,headName:n}}(ze(t,oi,4)?.g()??[],Xe(Gt(Ee(t,2)),0),Xe(Jt(Ee(t,3)),""))))};return null!=Wt(Ee(t,2))&&(e.timestampMs=Xe(Wt(Ee(t,2)),0)),e}function xi(t){return Array.from(t,(t=>t>127?t-256:t))}function Pi(t,e){if(t.length!==e.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${t.length} vs. ${e.length}).`);let n=0,r=0,i=0;for(let o=0;o<t.length;o++)n+=t[o]*e[o],r+=t[o]*t[o],i+=e[o]*e[o];if(r<=0||i<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return n/Math.sqrt(r*i)}let Bi;qr[477589892]=[0,wi,pi],Jr[477589892]=1;const Ui=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function Ni(){if(void 0===Bi)try{await WebAssembly.instantiate(Ui),Bi=!0}catch{Bi=!1}return Bi}async function Oi(t,e=""){const n=await Ni()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${e}/${t}_${n}.js`,wasmBinaryPath:`${e}/${t}_${n}.wasm`}}var Li=class{};function Fi(){var t=navigator;return"undefined"!=typeof OffscreenCanvas&&(!function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")}(t)||!!((t=t.userAgent.match(/Version\/([\d]+).*Safari/))&&t.length>=1&&Number(t[1])>=17))}async function ki(t){if("function"!=typeof importScripts){const e=document.createElement("script");return e.src=t.toString(),e.crossOrigin="anonymous",new Promise(((t,n)=>{e.addEventListener("load",(()=>{t()}),!1),e.addEventListener("error",(t=>{n(t)}),!1),document.body.appendChild(e)}))}importScripts(t.toString())}Li.forVisionTasks=function(t){return Oi("vision",t)},Li.forTextTasks=function(t){return Oi("text",t)},Li.forGenAiExperimentalTasks=function(t){return Oi("genai_experimental",t)},Li.forGenAiTasks=function(t){return Oi("genai",t)},Li.forAudioTasks=function(t){return Oi("audio",t)},Li.isSimdSupported=function(){return Ni()};function Vi(t,e,n){t.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),n(e=t.h.stringToNewUTF8(e)),t.h._free(e)}function ji(t,e,n){t.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const r=new Uint32Array(e.length);for(let n=0;n<e.length;n++)r[n]=t.h.stringToNewUTF8(e[n]);e=t.h._malloc(4*r.length),t.h.HEAPU32.set(r,e>>2),n(e);for(const e of r)t.h._free(e);t.h._free(e)}function Mi(t,e,n){t.h.simpleListeners=t.h.simpleListeners||{},t.h.simpleListeners[e]=n}function Ci(t,e,n){let r=[];t.h.simpleListeners=t.h.simpleListeners||{},t.h.simpleListeners[e]=(t,e,i)=>{e?(n(r,i),r=[]):r.push(t)}}const Gi=function(t){return class extends t{O(){this.h._registerModelResourcesGraphService()}}}(class{constructor(t,e){this.j=!0,this.h=t,this.g=null,this.i=0,this.m="function"==typeof this.h._addIntToInputStream,void 0!==e?this.h.canvas=e:Fi()?this.h.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.h.canvas=document.createElement("canvas"))}async initializeGraph(t){const e=await(await fetch(t)).arrayBuffer();t=!(t.endsWith(".pbtxt")||t.endsWith(".textproto")),this.setGraph(new Uint8Array(e),t)}setGraphFromString(t){this.setGraph((new TextEncoder).encode(t),!1)}setGraph(t,e){const n=t.length,r=this.h._malloc(n);this.h.HEAPU8.set(t,r),e?this.h._changeBinaryGraph(n,r):this.h._changeTextGraph(n,r),this.h._free(r)}configureAudio(t,e,n,r,i){this.h._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),Vi(this,r||"input_audio",(r=>{Vi(this,i=i||"audio_header",(i=>{this.h._configureAudio(r,i,t,e,n)}))}))}setAutoResizeCanvas(t){this.j=t}setAutoRenderToScreen(t){this.h._setAutoRenderToScreen(t)}setGpuBufferVerticalFlip(t){this.h.gpuOriginForWebTexturesIsBottomLeft=t}attachErrorListener(t){this.h.errorListener=t}attachEmptyPacketListener(t,e){this.h.emptyPacketListeners=this.h.emptyPacketListeners||{},this.h.emptyPacketListeners[t]=e}addAudioToStream(t,e,n){this.addAudioToStreamWithShape(t,0,0,e,n)}addAudioToStreamWithShape(t,e,n,r,i){const o=4*t.length;this.i!==o&&(this.g&&this.h._free(this.g),this.g=this.h._malloc(o),this.i=o),this.h.HEAPF32.set(t,this.g/4),Vi(this,r,(t=>{this.h._addAudioToInputStream(this.g,e,n,t,i)}))}addGpuBufferToStream(t,e,n){Vi(this,e,(e=>{if(!this.h.canvas)throw Error("No OpenGL canvas configured.");e?this.h._bindTextureToStream(e):this.h._bindTextureToCanvas();const r=this.h.canvas.getContext("webgl2")||this.h.canvas.getContext("webgl");if(!r)throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");this.h.gpuOriginForWebTexturesIsBottomLeft&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),this.h.gpuOriginForWebTexturesIsBottomLeft&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const[i,o]=void 0!==t.videoWidth?[t.videoWidth,t.videoHeight]:void 0!==t.naturalWidth?[t.naturalWidth,t.naturalHeight]:void 0!==t.displayWidth?[t.displayWidth,t.displayHeight]:[t.width,t.height];!this.j||i===this.h.canvas.width&&o===this.h.canvas.height||(this.h.canvas.width=i,this.h.canvas.height=o);const[s,a]=[i,o];this.h._addBoundTextureToStream(e,s,a,n)}))}addBoolToStream(t,e,n){Vi(this,e,(e=>{this.h._addBoolToInputStream(t,e,n)}))}addDoubleToStream(t,e,n){Vi(this,e,(e=>{this.h._addDoubleToInputStream(t,e,n)}))}addFloatToStream(t,e,n){Vi(this,e,(e=>{this.h._addFloatToInputStream(t,e,n)}))}addIntToStream(t,e,n){Vi(this,e,(e=>{this.h._addIntToInputStream(t,e,n)}))}addUintToStream(t,e,n){Vi(this,e,(e=>{this.h._addUintToInputStream(t,e,n)}))}addStringToStream(t,e,n){Vi(this,e,(e=>{Vi(this,t,(t=>{this.h._addStringToInputStream(t,e,n)}))}))}addStringRecordToStream(t,e,n){Vi(this,e,(e=>{ji(this,Object.keys(t),(r=>{ji(this,Object.values(t),(i=>{this.h._addFlatHashMapToInputStream(r,i,Object.keys(t).length,e,n)}))}))}))}addProtoToStream(t,e,n,r){Vi(this,n,(n=>{Vi(this,e,(e=>{const i=this.h._malloc(t.length);this.h.HEAPU8.set(t,i),this.h._addProtoToInputStream(i,t.length,e,n,r),this.h._free(i)}))}))}addEmptyPacketToStream(t,e){Vi(this,t,(t=>{this.h._addEmptyPacketToInputStream(t,e)}))}addBoolVectorToStream(t,e,n){Vi(this,e,(e=>{const r=this.h._allocateBoolVector(t.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(const e of t)this.h._addBoolVectorEntry(r,e);this.h._addBoolVectorToInputStream(r,e,n)}))}addDoubleVectorToStream(t,e,n){Vi(this,e,(e=>{const r=this.h._allocateDoubleVector(t.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(const e of t)this.h._addDoubleVectorEntry(r,e);this.h._addDoubleVectorToInputStream(r,e,n)}))}addFloatVectorToStream(t,e,n){Vi(this,e,(e=>{const r=this.h._allocateFloatVector(t.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(const e of t)this.h._addFloatVectorEntry(r,e);this.h._addFloatVectorToInputStream(r,e,n)}))}addIntVectorToStream(t,e,n){Vi(this,e,(e=>{const r=this.h._allocateIntVector(t.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(const e of t)this.h._addIntVectorEntry(r,e);this.h._addIntVectorToInputStream(r,e,n)}))}addUintVectorToStream(t,e,n){Vi(this,e,(e=>{const r=this.h._allocateUintVector(t.length);if(!r)throw Error("Unable to allocate new unsigned int vector on heap.");for(const e of t)this.h._addUintVectorEntry(r,e);this.h._addUintVectorToInputStream(r,e,n)}))}addStringVectorToStream(t,e,n){Vi(this,e,(e=>{const r=this.h._allocateStringVector(t.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(const e of t)Vi(this,e,(t=>{this.h._addStringVectorEntry(r,t)}));this.h._addStringVectorToInputStream(r,e,n)}))}addBoolToInputSidePacket(t,e){Vi(this,e,(e=>{this.h._addBoolToInputSidePacket(t,e)}))}addDoubleToInputSidePacket(t,e){Vi(this,e,(e=>{this.h._addDoubleToInputSidePacket(t,e)}))}addFloatToInputSidePacket(t,e){Vi(this,e,(e=>{this.h._addFloatToInputSidePacket(t,e)}))}addIntToInputSidePacket(t,e){Vi(this,e,(e=>{this.h._addIntToInputSidePacket(t,e)}))}addUintToInputSidePacket(t,e){Vi(this,e,(e=>{this.h._addUintToInputSidePacket(t,e)}))}addStringToInputSidePacket(t,e){Vi(this,e,(e=>{Vi(this,t,(t=>{this.h._addStringToInputSidePacket(t,e)}))}))}addProtoToInputSidePacket(t,e,n){Vi(this,n,(n=>{Vi(this,e,(e=>{const r=this.h._malloc(t.length);this.h.HEAPU8.set(t,r),this.h._addProtoToInputSidePacket(r,t.length,e,n),this.h._free(r)}))}))}addBoolVectorToInputSidePacket(t,e){Vi(this,e,(e=>{const n=this.h._allocateBoolVector(t.length);if(!n)throw Error("Unable to allocate new bool vector on heap.");for(const e of t)this.h._addBoolVectorEntry(n,e);this.h._addBoolVectorToInputSidePacket(n,e)}))}addDoubleVectorToInputSidePacket(t,e){Vi(this,e,(e=>{const n=this.h._allocateDoubleVector(t.length);if(!n)throw Error("Unable to allocate new double vector on heap.");for(const e of t)this.h._addDoubleVectorEntry(n,e);this.h._addDoubleVectorToInputSidePacket(n,e)}))}addFloatVectorToInputSidePacket(t,e){Vi(this,e,(e=>{const n=this.h._allocateFloatVector(t.length);if(!n)throw Error("Unable to allocate new float vector on heap.");for(const e of t)this.h._addFloatVectorEntry(n,e);this.h._addFloatVectorToInputSidePacket(n,e)}))}addIntVectorToInputSidePacket(t,e){Vi(this,e,(e=>{const n=this.h._allocateIntVector(t.length);if(!n)throw Error("Unable to allocate new int vector on heap.");for(const e of t)this.h._addIntVectorEntry(n,e);this.h._addIntVectorToInputSidePacket(n,e)}))}addUintVectorToInputSidePacket(t,e){Vi(this,e,(e=>{const n=this.h._allocateUintVector(t.length);if(!n)throw Error("Unable to allocate new unsigned int vector on heap.");for(const e of t)this.h._addUintVectorEntry(n,e);this.h._addUintVectorToInputSidePacket(n,e)}))}addStringVectorToInputSidePacket(t,e){Vi(this,e,(e=>{const n=this.h._allocateStringVector(t.length);if(!n)throw Error("Unable to allocate new string vector on heap.");for(const e of t)Vi(this,e,(t=>{this.h._addStringVectorEntry(n,t)}));this.h._addStringVectorToInputSidePacket(n,e)}))}attachBoolListener(t,e){Mi(this,t,e),Vi(this,t,(t=>{this.h._attachBoolListener(t)}))}attachBoolVectorListener(t,e){Ci(this,t,e),Vi(this,t,(t=>{this.h._attachBoolVectorListener(t)}))}attachIntListener(t,e){Mi(this,t,e),Vi(this,t,(t=>{this.h._attachIntListener(t)}))}attachIntVectorListener(t,e){Ci(this,t,e),Vi(this,t,(t=>{this.h._attachIntVectorListener(t)}))}attachUintListener(t,e){Mi(this,t,e),Vi(this,t,(t=>{this.h._attachUintListener(t)}))}attachUintVectorListener(t,e){Ci(this,t,e),Vi(this,t,(t=>{this.h._attachUintVectorListener(t)}))}attachDoubleListener(t,e){Mi(this,t,e),Vi(this,t,(t=>{this.h._attachDoubleListener(t)}))}attachDoubleVectorListener(t,e){Ci(this,t,e),Vi(this,t,(t=>{this.h._attachDoubleVectorListener(t)}))}attachFloatListener(t,e){Mi(this,t,e),Vi(this,t,(t=>{this.h._attachFloatListener(t)}))}attachFloatVectorListener(t,e){Ci(this,t,e),Vi(this,t,(t=>{this.h._attachFloatVectorListener(t)}))}attachStringListener(t,e){Mi(this,t,e),Vi(this,t,(t=>{this.h._attachStringListener(t)}))}attachStringVectorListener(t,e){Ci(this,t,e),Vi(this,t,(t=>{this.h._attachStringVectorListener(t)}))}attachProtoListener(t,e,n){Mi(this,t,e),Vi(this,t,(t=>{this.h._attachProtoListener(t,n||!1)}))}attachProtoVectorListener(t,e,n){Ci(this,t,e),Vi(this,t,(t=>{this.h._attachProtoVectorListener(t,n||!1)}))}attachAudioListener(t,e,n){this.h._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),Mi(this,t,((t,n)=>{t=new Float32Array(t.buffer,t.byteOffset,t.length/4),e(t,n)})),Vi(this,t,(t=>{this.h._attachAudioListener(t,n||!1)}))}finishProcessing(){this.h._waitUntilIdle()}closeGraph(){this.h._closeGraph(),this.h.simpleListeners=void 0,this.h.emptyPacketListeners=void 0}});var Di=class extends Gi{};async function zi(t,e,n){return t=await(async(t,e,n,r)=>{if(e&&await ki(e),!self.ModuleFactory)throw Error("ModuleFactory not set.");if(n&&(await ki(n),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&r&&((e=self.Module).locateFile=r.locateFile,r.mainScriptUrlOrBlob&&(e.mainScriptUrlOrBlob=r.mainScriptUrlOrBlob)),r=await self.ModuleFactory(self.Module||r),self.ModuleFactory=self.Module=void 0,new t(r,null)})(t,e.wasmLoaderPath,e.assetLoaderPath,{locateFile:t=>t.endsWith(".wasm")?e.wasmBinaryPath.toString():e.assetBinaryPath&&t.endsWith(".data")?e.assetBinaryPath.toString():t}),await t.o(n),t}async function $i(t,e,n){return zi(t,e,n)}function Wi(t,e){const n=ze(t.baseOptions,bi,1)||new bi;"string"==typeof e?(xe(n,2,qt(e)),xe(n,1)):e instanceof Uint8Array&&(xe(n,1,ut(e,!1,!1)),xe(n,2)),Re(t.baseOptions,0,1,n)}function Ri(t,e){const n=e.baseOptions||{};if(e.baseOptions?.modelAssetBuffer&&e.baseOptions?.modelAssetPath)throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(ze(t.baseOptions,bi,1)?.g()||ze(t.baseOptions,bi,1)?.i()||e.baseOptions?.modelAssetBuffer||e.baseOptions?.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(function(t,e){let n=ze(t.baseOptions,mi,3);if(!n){var r=n=new mi;He(r,4,new zr)}"delegate"in e&&("GPU"===e.delegate?He(e=n,2,r=new Cr):He(e=n,4,r=new zr)),Re(t.baseOptions,0,3,n)}(t,n),n.modelAssetPath)return fetch(n.modelAssetPath.toString()).then((t=>{if(t.ok)return t.arrayBuffer();throw Error(`Failed to fetch model: ${n.modelAssetPath} (${t.status})`)})).then((e=>{try{t.g.h.FS_unlink("/model.dat")}catch{}t.g.h.FS_createDataFile("/","model.dat",new Uint8Array(e),!0,!1,!1),Wi(t,"/model.dat"),t.v()}));if(n.modelAssetBuffer instanceof Uint8Array)Wi(t,n.modelAssetBuffer);else if(n.modelAssetBuffer)return async function(t){const e=[];for(var n=0;;){const{done:r,value:i}=await t.read();if(r)break;e.push(i),n+=i.length}if(0===e.length)return new Uint8Array(0);if(1===e.length)return e[0];t=new Uint8Array(n),n=0;for(const r of e)t.set(r,n),n+=r.length;return t}(n.modelAssetBuffer).then((e=>{Wi(t,e),t.v()}));return t.v(),Promise.resolve()}function Hi(t){try{const e=t.m.length;if(1===e)throw Error(t.m[0].message);if(e>1)throw Error("Encountered multiple errors: "+t.m.map((t=>t.message)).join(", "))}finally{t.m=[]}}function qi(t,e){t.j=Math.max(t.j,e)}var Ji=class{constructor(t){this.g=t,this.m=[],this.j=0,this.g.setAutoRenderToScreen(!1)}setGraph(t,e){this.g.attachErrorListener(((t,e)=>{this.m.push(Error(e))})),this.g.O(),this.g.setGraph(t,e),Hi(this)}finishProcessing(){this.g.finishProcessing(),Hi(this)}close(){this.g.closeGraph()}};Ji.prototype.close=Ji.prototype.close,function(e,n){e=e.split(".");var r,i=t;e[0]in i||void 0===i.execScript||i.execScript("var "+e[0]);for(;e.length&&(r=e.shift());)e.length||void 0===n?i=i[r]&&i[r]!==Object.prototype[r]?i[r]:i[r]={}:i[r]=n}("TaskRunner",Ji);var Ki=class extends Ji{constructor(t,e){super(new Di(t,e)),this.u={languages:[]},Re(t=this.i=new _i,0,1,e=new vi)}o(t){return Re(this.i,0,2,Ii(t,ze(this.i,di,2))),Ri(this,t)}get baseOptions(){return ze(this.i,vi,1)}set baseOptions(t){Re(this.i,0,1,t)}M(t){return this.u={languages:[]},this.g.addStringToStream(t,"text_in",this.j+1),this.finishProcessing(),this.u}v(){var t=new ri;ei(t),Qe(t,15,"classifications_out");const e=new Hr;Sn(e,Si,this.i);const n=new Yr;ke(n,qt("mediapipe.tasks.text.text_classifier.TextClassifierGraph")),Xr(n),Qe(n,4,"CLASSIFICATIONS:classifications_out"),n.o(e),Ke(t,n),this.g.attachProtoListener("classifications_out",((t,e)=>{if(({classifications:t}=Ti(ai(t))),1!==t.length)throw Error(`Expected 1 classification head, got ${t.length}`);this.u.languages=t[0].categories.map((t=>({languageCode:t.categoryName,probability:t.score}))),qi(this,e)})),this.g.attachEmptyPacketListener("classifications_out",(t=>{qi(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Ki.prototype.detect=Ki.prototype.M,Ki.prototype.setOptions=Ki.prototype.o,Ki.createFromModelPath=function(t,e){return $i(Ki,t,{baseOptions:{modelAssetPath:e}})},Ki.createFromModelBuffer=function(t,e){return $i(Ki,t,{baseOptions:{modelAssetBuffer:e}})},Ki.createFromOptions=function(t,e){return $i(Ki,t,e)};var Xi=class extends Ji{constructor(t,e){super(new Di(t,e)),this.u={classifications:[]},Re(t=this.i=new _i,0,1,e=new vi)}o(t){return Re(this.i,0,2,Ii(t,ze(this.i,di,2))),Ri(this,t)}get baseOptions(){return ze(this.i,vi,1)}set baseOptions(t){Re(this.i,0,1,t)}L(t){return this.u={classifications:[]},this.g.addStringToStream(t,"text_in",this.j+1),this.finishProcessing(),this.u}v(){var t=new ri;ei(t),Qe(t,15,"classifications_out");const e=new Hr;Sn(e,Si,this.i);const n=new Yr;ke(n,qt("mediapipe.tasks.text.text_classifier.TextClassifierGraph")),Xr(n),Qe(n,4,"CLASSIFICATIONS:classifications_out"),n.o(e),Ke(t,n),this.g.attachProtoListener("classifications_out",((t,e)=>{this.u=Ti(ai(t)),qi(this,e)})),this.g.attachEmptyPacketListener("classifications_out",(t=>{qi(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Xi.prototype.classify=Xi.prototype.L,Xi.prototype.setOptions=Xi.prototype.o,Xi.createFromModelPath=function(t,e){return $i(Xi,t,{baseOptions:{modelAssetPath:e}})},Xi.createFromModelBuffer=function(t,e){return $i(Xi,t,{baseOptions:{modelAssetBuffer:e}})},Xi.createFromOptions=function(t,e){return $i(Xi,t,e)};var Yi=class extends Ji{constructor(t,e){super(new Di(t,e)),this.u={embeddings:[]},Re(t=this.i=new Ai,0,1,e=new vi)}o(t){var e=this.i,n=ze(this.i,gi,2);return n=n?ve(n):new gi,void 0!==t.l2Normalize?xe(n,1,jt(t.l2Normalize)):"l2Normalize"in t&&xe(n,1),void 0!==t.quantize?xe(n,2,jt(t.quantize)):"quantize"in t&&xe(n,2),Re(e,0,2,n),Ri(this,t)}get baseOptions(){return ze(this.i,vi,1)}set baseOptions(t){Re(this.i,0,1,t)}N(t){return this.g.addStringToStream(t,"text_in",this.j+1),this.finishProcessing(),this.u}v(){var t=new ri;ei(t),Qe(t,15,"embeddings_out");const e=new Hr;Sn(e,Ei,this.i);const n=new Yr;ke(n,qt("mediapipe.tasks.text.text_embedder.TextEmbedderGraph")),Xr(n),Qe(n,4,"EMBEDDINGS:embeddings_out"),n.o(e),Ke(t,n),this.g.attachProtoListener("embeddings_out",((t,e)=>{t=fi(t),this.u=function(t){return{embeddings:We(t,li).map((t=>{const e={headIndex:Xe(Gt(Ee(t,3)),0)??-1,headName:Xe(Jt(Ee(t,4)),"")??""};if(void 0!==De(t,ui,Ve(t,1)))e.floatEmbedding=Ne(ze(t,ui,Ve(t,1)),1,Vt,void 0===gt?2:5).slice();else{const n=new Uint8Array(0);e.quantizedEmbedding=ze(t,ci,Ve(t,2))?.J()?.K()??n}return e})),timestampMs:Xe(Wt(Ee(t,2)),0)}}(t),qi(this,e)})),this.g.attachEmptyPacketListener("embeddings_out",(t=>{qi(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Yi.cosineSimilarity=function(t,e){if(t.floatEmbedding&&e.floatEmbedding)t=Pi(t.floatEmbedding,e.floatEmbedding);else{if(!t.quantizedEmbedding||!e.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");t=Pi(xi(t.quantizedEmbedding),xi(e.quantizedEmbedding))}return t},Yi.prototype.embed=Yi.prototype.N,Yi.prototype.setOptions=Yi.prototype.o,Yi.createFromModelPath=function(t,e){return $i(Yi,t,{baseOptions:{modelAssetPath:e}})},Yi.createFromModelBuffer=function(t,e){return $i(Yi,t,{baseOptions:{modelAssetBuffer:e}})},Yi.createFromOptions=function(t,e){return $i(Yi,t,e)},exports.FilesetResolver=Li,exports.LanguageDetector=Ki,exports.TextClassifier=Xi,exports.TextEmbedder=Yi;
//# sourceMappingURL=text_bundle_cjs.js.map
